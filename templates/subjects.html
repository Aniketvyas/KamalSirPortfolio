<!doctype html> {% load static %}
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="title icon" href="images/title-img.png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style_dash.css' %}">
    <title>Admin Dashboard</title>
</head>

<body>

    <!-- navbar -->
    <nav class="navbar navbar-expand-md navbar-light">
        <button class="navbar-toggler ml-auto mb-2 bg-light" type="button" data-toggle="collapse" data-target="#myNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="myNavbar">
            <div class="container-fluid">
                <div class="row">
                    <!-- sidebar -->
                    <div class="col-xl-2 col-lg-3 col-md-4 sidebar fixed-top">

                        <div class="bottom-border pb-3 py-3">
                            <img src="images/admin.jpeg" width="50" class="rounded-circle mr-3">
                            <a href="#" class="text-white text-upper">{{user.username}}</a>
                        </div>
                        <ul class="navbar-nav flex-column mt-4">
                            <li class="nav-item"><a href="/dashboard" class="nav-link text-white p-1 mb-2 small"><i
                                        class="fas fa-home text-light  mr-3"></i>Dashboard</a></li>
                            <li class="nav-item"><a href="#" class="nav-link text-white p-1 mb-2 sidebar-link small"><i
                                        class="fas fa-user text-light  mr-3"></i>Profile</a></li>
                            <li class="nav-item"><a href="/admin" class="nav-link text-white p-1 mb-2 sidebar-link small"><i
                                        class="fas fa-user text-light  mr-3"></i>Admin Portal</a></li>
                            <li class="nav-item"><a href="/books" class="nav-link text-white p-1 mb-2 sidebar-link small"><i
                                        class="fas fa-envelope text-light  mr-3"></i>Books</a></li>
                            <li class="nav-item"><a href="/subjects" class="nav-link text-white p-1 mb-2 sidebar-link small"><i
                                        class="fas fa-shopping-cart text-light  mr-3"></i>Subjects</a></li>
                            <li class="nav-item"><a href="/notes" class="nav-link text-white p-1 mb-2 sidebar-link small"><i
                                        class="fas fa-chart-line text-light  mr-3"></i>Notes</a></li>
                            <li class="nav-item"><a href="/assignments" class="nav-link text-white p-1 mb-2 sidebar-link small"><i
                                        class="fas fa-chart-bar text-light  mr-3"></i>Assignments</a></li>
                            <li class="nav-item"><a href="/queries" class="nav-link text-white p-1 mb-2 sidebar-link small"><i
                                        class="fas fa-table text-light  mr-3"></i>Queries</a></li>
                            <li class="nav-item"><a href="/settings" class="nav-link text-white p-1 mb-2 sidebar-link small"><i
                                        class="fas fa-wrench text-light  mr-3"></i>Settings</a></li>
                            <li class="nav-item"><a href="/" class="nav-link text-white p-1 mb-2 sidebar-link small"><i
                                        class="fas fa-file-alt text-light  mr-3"></i>Home</a></li>
                        </ul>
                    </div>
                    <!-- end of sidebar -->

                    <!-- top-nav -->
                    <div class="col-xl-10 col-lg-9 col-md-8 ml-auto fixed-top py-2 top-navbar">
                        <div class="row align-items-center">
                            <div class="col-md-4">
                                <h4 class="text-light text-uppercase mb-0">Dashboard</h4>
                            </div>
                            <div class="col-md-5">

                            </div>
                            <div class="col-md-3">
                                <ul class="navbar-nav">
                                    <li class="nav-item ml-md-auto"><a href="#" class="nav-link text-white" data-toggle="modal" data-target="#sign-out"><i
                                                class="fas fa-sign-out-alt text-danger fa-lg mr-2"></i>Logout</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- end of top-nav -->
                </div>
            </div>
        </div>
    </nav>
    <!-- end of navbar -->

    <!-- modal -->
    <div class="modal fade" id="sign-out">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Want to leave?</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    Press logout to leave
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-dismiss="modal">Stay Here</button>
                    <a href="/accounts/logout"><button type="button" class="btn btn-danger">Logout</button></a>
                </div>
            </div>
        </div>
    </div>
    <!-- end of modal -->



    {% if home %}
    <!-- cards -->
    <section>
        <div class="container-fluid">
            <div class="row">
                <div class="col-xl-10 col-lg-9 col-md-8 ml-auto">
                    <div class="row pt-md-5 mt-md-3 mb-5">
                        <div class="col-xl-3 col-sm-6 p-2">
                            <div class="card card-common">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <i class="fas fa-shopping-cart fa-3x text-warning"></i>
                                        <div class="text-right text-secondary">
                                            <h5>Books</h5>
                                            <h3>200+</h3>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer text-secondary">
                                    <i class="fas fa-arrow-right mr-3"></i>
                                    <span><a href="#">View More</a></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-sm-6 p-2">
                            <div class="card card-common">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <i class="fas fa-money-bill-alt fa-3x text-success"></i>
                                        <div class="text-right text-secondary">
                                            <h5>Subjects</h5>
                                            <h3>23+</h3>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer text-secondary">
                                    <i class="fas fa-arrow-right mr-3"></i>
                                    <span><a href="#">View More</a></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-sm-6 p-2">
                            <div class="card card-common">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <i class="fas fa-users fa-3x text-info"></i>
                                        <div class="text-right text-secondary">
                                            <h5>Users</h5>
                                            <h3>15,000</h3>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer text-secondary">
                                    <i class="fas fa-arrow-right mr-3"></i>
                                    <span><a href="#">View More</a></span>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-3 col-sm-6 p-2">
                            <div class="card card-common">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between">
                                        <i class="fas fa-chart-line fa-3x text-danger"></i>
                                        <div class="text-right text-secondary">
                                            <h5>Visitors</h5>
                                            <h3>45,000</h3>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-footer text-secondary">
                                    <i class="fas fa-arrow-right mr-3"></i>
                                    <span><a href="#">View More</a></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end of cards -->

    <section>
        <div class="container-fluid">
            <div class="row mb-5">
                <div class="col-xl-10 col-lg-9 col-md-8 ml-auto">
                    <div class="row">
                        <div class="col-xl-6 col-12 mb-4 mb-xl-0">
                            <div class="card card-common">
                                <div class="card-body">

                                    <h3 class="text-muted text-center text-uppercase mb-3">Subjects</h3>
                                    <table class="table bg-dark table-borderless table-responsive-sm bg-light text-center">
                                        <thead>
                                            <tr class="text-muted text-white">
                                                <th class="text-white">#</th>
                                                <th class="text-center text-white">Name</th>

                                                <th class="text-white">Contact</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for i in subjects %}
                                            <tr>
                                                <th class="text-white small">{{forloop.counter}}</th>
                                                <td class="text-white text-uppercase small">{{i.name}}</td>

                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <a href="subject/{{i.id}}/view" type="button" class="btn btn-success btn-sm text-center">View</a>
                                                        <!-- Default dropleft button -->
                                                        <div class="dropup">
                                                            <button data-toggle="dropdown" class="btn btn-warning btn-sm dropdown-toggle">Update</button>
                                                            <div class="dropdown-menu">
                                                                <form action="/subject/{{i.id}}/update" method="POST" class="px-4 py-3">{% csrf_token %}
                                                                    <div class="container">

                                                                        <div class="form-group ">
                                                                            <label for="inputEmail4">New Name</label>
                                                                            <input type="text" id="inputEmail4" class="form-control" name="name">
                                                                            <div>


                                                                            </div>
                                                                        </div>
                                                                        <button type="submit" class="btn btn-primary">Update Request</button>
                                                                </form>
                                                                </div>
                                                            </div>
                                                            <a href="subject/{{i.id}}/delete" type="button" class="btn btn-danger btn-sm">Delete</a>
                                                        </div>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>

                                    <!-- pagination -->
                                    <nav>
                                        <ul class="pagination justify-content-center">
                                            <li class="page-item">
                                                <a href="#" class="page-link py-2 px-3">
                                                    <span>&laquo;</span>
                                                </a>
                                            </li>
                                            <li class="page-item active">
                                                <a href="#" class="page-link py-2 px-3">
                                                    1
                                                </a>
                                            </li>
                                            <li class="page-item">
                                                <a href="#" class="page-link py-2 px-3">
                                                    2
                                                </a>
                                            </li>
                                            <li class="page-item">
                                                <a href="#" class="page-link py-2 px-3">
                                                    3
                                                </a>
                                            </li>
                                            <li class="page-item">
                                                <a href="#" class="page-link py-2 px-3">
                                                    <span>&raquo;</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </nav>
                                    <!-- end of pagination -->

                                    </div>
                                </div>

                            </div>



                            <div class="col-xl-6 col-12 mb-4 mb-xl-0">
                                <div class="card card-common">
                                    <div class="card-body">

                                        <h3 class="text-muted text-center text-uppercase mb-3">students</h3>
                                        <table class="table bg-dark table-borderless table-responsive bg-light text-center">
                                            <thead>
                                                <tr class="text-muted text-white">
                                                    <th class="text-white">#</th>
                                                    <th class="text-center text-white">Name</th>
                                                    <th class="text-center text-white">Email</th>
                                                    <th class="text-white">Contact</th>
                                                    <th class="text-white">University</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for i in students %}
                                                <tr>
                                                    <th class="text-white small">{{forloop.counter}}</th>
                                                    <td class="text-white text-uppercase small">{{i.name}}</td>
                                                    <td class="text-white text-uppercase small">{{i.email}}</td>
                                                    <td class="text-white text-uppercase small">{{i.phoneNumber}}</td>
                                                    <td class="text-white text-uppercase small">{{i.university}}</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>

                                        <!-- pagination -->
                                        <ul class="pagination justify-content-center">
                    
                                            {% if students.has_previous %}
                                            <li class="page-item">
                                            <a class="page-link py-2 px-3" href="?page={{ students.previous_page_number }}">
                                                <span>&laquo;</span>
                                            </a>
                                            </li>
                                            {% endif %}
                                            {% for num in students.paginator.page_range %}
                                                {% if students.number == num %}
                                                    <li class="page-item active"><span class="page-link active">{{ num }}</span></li>
                                                {% elif num > students.number|add:'-3' and num < students.number|add:'3' %}
                                                    <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
                                                {% endif %}
                                            {% endfor %}
                                            {% if students.has_next %}
                                                <li class="page-item"><a class="page-link py-2 px-3" href="?page={{ students.next_page_number }}">
                                                    <span>&raquo;</span>
                                                </a></li>
                                              
                                            {% endif %}
                                            </ul>
                                        <!-- end of pagination -->
                                    </div>
                                </div>
                            </div>

                        </div>



                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end of tables -->



    <section>
        <div class="container-fluid">
            <div class="row mb-5">
                <div class="col-xl-10 col-lg-9 col-md-8 ml-auto">
                    <div class="row">
                        <div class="col-xl-6 col-12 mb-4 mb-xl-0">
                            <div class="card-1 card-common-1">
                                <div class="card-body text-center p-3">
                                    <h6 class="text-center">Need's to add a new subject ?</h6>
                                    <a href="#newsubject" class="btn btn-outline-danger" data-toggle="modal" data-target="#addSubject">Add Here</a>

                                    <div class="modal fade" id="addSubject" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content theme-background">
                                                <div class="modal-header">
                                                    <h5 class="modal-title text-white text-uppercase" id="exampleModalLabel">Add a New Subject</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                              </button>
                                                </div>
                                                <form action="addSubject" method="POST">{% csrf_token %}
                                                <div class="modal-body">
                                                    <div class="form-group">
                                                        <input class="form-control" type="text" placeholder="Enter Subject Name" name="name">
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                    <button type="submit" class="btn btn-primary">Save changes</button>
                                                </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="col-xl-6 col-12 mb-4 mb-xl-0">
                            <div class="card-1 card-common-1">
                                <div class="card-body text-center p-3">
                                    <h6 class="text-center">Need's to add a new student ?</h6>
                                    <a href="#newsubject" class="btn btn-outline-danger" data-toggle="modal" data-target="#addStudent">Add Here</a>
                                    <div class="modal fade" id="addStudent" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content theme-background">
                                                <div class="modal-header text-center">
                                                    <h5 class="modal-title text-white text-center text-uppercase" id="exampleModalLabel">Add a New Student</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                              </button>
                                                </div>
                                                <form action="addStudent" method="POST"> {% csrf_token %}
                                                <div class="modal-body">
                                                   
                                                        <div class="form-group">
                                                           
                                                            <input class="form-control" type="text" name="name" placeholder="Enter Student Name">
                                                        </div>
                                                        <div class="form-group">
                                                            
                                                            <input class="form-control" type="text" name="email" placeholder="Email">
                                                        </div>
                                                        <div class="form-group">
                                                            
                                                            <input class="form-control" type="text" name="university" placeholder="university">
                                                        </div>
                                                        <div class="form-group">
                                                            
                                                            <input class="form-control" type="text" name="contact" placeholder="Contact Number">
                                                        </div>
                                                    
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                    <button type="submit" class="btn btn-primary">Save changes</button>
                                                </div>
                                            </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </section>

    {% endif %} {% if subjectView %}
    <section>
        <div class="container-fluid">

            <div class="col-xl-10 col-lg-10 col-md-8 ml-auto">
                <div class="row pt-md-5 mt-md-3 mb-5">
                    <!-- <div class="col-xl-10 col-sm-6  p-1 ml-5"> -->
                    <div class="card card-common jumbotron">
                        <div class="card-body">
                            <div class="">
                                <h1 class="theme-color text-center text-uppercase">Study Timeline</h1>
                                <section class="timeline">
                                    <ol>
                                        {% for i in data %}
                                        <li class="event">
                                            <div class="div theme-background text-white text-center">
                                                <time class="small">{{i.uploadDate}}</time>
                                                <small>{{ i.subject }}</small><br>
                                                <small>{{i.title}}</small><br>
                                                <a href="/media/{{i.attachment}}" class="btn btn-outline-warning btn-sm m-3">View Attachment</a>
                                            </div>
                                        </li>
                                        {% endfor %}
                                        <li></li>
                                    </ol>

                                    <div class="arrows">
                                        <button class="arrow arrow__prev">
                                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/arrow_prev.svg" alt="prev timeline arrow">
                            </button>
                                        <button class="arrow arrow__next">
                                <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/162656/arrow_next.svg" alt="next timeline arrow">
                            </button>
                                    </div>
                                </section>


                            </div>
                        </div>
                    </div>
                    <!-- </div> -->
                </div>
            </div>
        </div>

    </section>

    <section>
        <div class="container-fluid">
            <!-- <div class="row mb-5"> -->
            <div class="col-xl-10 col-lg-9 col-md-12 ml-auto">
                <div class="row align-items-center">
                    <div class="card card-common jumbotron">
                        <div class="card-body">
                            <h3 class="font-weight-bold text-center text-uppercase mb-4 theme-color">Enrolled students</h3>
                            <table class="table table-striped table-responsive-md bg-light text-center">
                                <thead>
                                    <tr class="text-muted">
                                        <th>#</th>
                                        <th>subject</th>
                                        <th>student</th>
                                        <th>student Email</th>
                                        <th>student Phone</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    {% for i in studentEnrollment %}
                                    <tr>
                                        <th>{{forloop.counter}}</th>
                                        <td>{{i.subject}}</td>
                                        <td>{{i.student}}</td>
                                        <td>{{i.student.email}}</td>
                                        <td>{{i.student.phoneNumber}}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>

                            <!-- pagination -->
                            <nav>
                                <ul class="pagination justify-content-center">
                                    <li class="page-item">
                                        <a href="#" class="page-link py-2 px-3">
                                            <span>&laquo;</span>
                                        </a>
                                    </li>
                                    <li class="page-item active">
                                        <a href="#" class="page-link py-2 px-3">
                        1
                      </a>
                                    </li>
                                    <li class="page-item">
                                        <a href="#" class="page-link py-2 px-3">
                        2
                      </a>
                                    </li>
                                    <li class="page-item">
                                        <a href="#" class="page-link py-2 px-3">
                        3
                      </a>
                                    </li>
                                    <li class="page-item">
                                        <a href="#" class="page-link py-2 px-3">
                                            <span>&raquo;</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                    <!-- </div> -->
                </div>
            </div>
        </div>
    </section>
    <!-- end of pagination -->
    {% endif %}
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script src="{% static 'js/timeline.js' %}"></script>
</body>

</html>